{% extends "base.html" %}

{% block title %}Rekomendasi Tukang{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    body {
        background-color: #f8f9fa;
    }

    .header-container {
        padding: 1.5rem 1rem 1rem 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .header-container h1 {
        font-size: 1.8rem;
        font-weight: 600;
        color: #333;
        margin: 0;
    }

    .recommendation-card {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.25rem;
        margin-bottom: 1rem;
        border-radius: 0.75rem;
        background-color: #fff;
        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
        transition: 0.2s;
        cursor: pointer; 
    }

    .recommendation-card:hover {
        box-shadow: 0 6px 10px rgba(0,0,0,0.12);
    }

    .card-left {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .tukang-avatar img {
        width: 60px;
        height: 60px;
        border-radius: 0.5rem;
        object-fit: cover;
    }

    .tukang-details {
        display: flex;
        flex-direction: column;
        text-align: left;
    }

    .tukang-keahlian {
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
        margin-bottom: 0.2rem;
    }

    .tukang-nama {
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 0.3rem;
    }

    .star-icon {
        color: #ffbf00;
        font-size: 0.9rem;
    }

    .star-icon.inactive {
        color: #ccc;
    }

    .card-right {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .btn-chat {
        background-color: transparent;
        color: #ff8c00;
        border: 1px solid #ff8c00;
        padding: 0.5rem 0.8rem;
        border-radius: 0.5rem;
        font-size: 1rem;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .btn-chat:hover {
        color: #fff;
        background-color: #ff8c00;
    }

    .btn-order {
        background-color: #ff8c00;
        color: #fff;
        font-weight: 500;
        border-radius: 0.5rem;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        text-decoration: none;
        white-space: nowrap;
        border: none;
    }

    .btn-order:hover {
        background-color: #e67600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid mx-auto p-4">

    <div class="header-container">
        <h1>Rekomendasi Tukang</h1>
    </div>

    <div class="space-y-4 pt-2">
        {% for tukang in tukangs %}
        <a href="{{ url_for('lihat_tukang', tukang_id=tukang.id) }}" style="text-decoration: none;">
            <div class="recommendation-card">
                <div class="card-left">
                    <div class="tukang-avatar">
                        <img src="https://pengadaan.or.id/wp-content/uploads/2023/10/tukang-bangunan-1.jpg" alt="Foto {{ tukang.nama }}">
                    </div>
                    <div class="tukang-details">
                        <p class="tukang-keahlian">{{ tukang.keahlian }}</p>
                        <p class="tukang-nama">{{ tukang.nama }}</p>
                        <div>
                            {% set rating = tukang.rating|round(0, 'floor') %}
                            {% for i in range(5) %}
                                {% if i < rating %}
                                    <i class="fas fa-star star-icon"></i>
                                {% else %}
                                    <i class="fas fa-star star-icon inactive"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="card-right">
                    <a href="{{ url_for('chat') }}" class="btn-chat" onclick="event.stopPropagation();">
                        <i class="far fa-comment-dots"></i>
                    </a>
                    <a href="{{ url_for('booking') }}" class="btn-order" onclick="event.stopPropagation();">
                        Pesan Sekarang
                    </a>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endblock %}
